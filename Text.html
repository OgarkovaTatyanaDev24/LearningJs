<html>
  <head>
    <div id="block"></div>
    <script>
      const myGlobal = {
        consistency: {
          domMissing: false,
          bounds: false,
          position: false,
        },
        counter: {
          domMissing: 0,
          bounds: 0,
          position: 0,
        },
        changeDomMissing(change) {
          let add = change ? 1 : -1;
          this.counter.domMissing += add;

          this.consistency.domMissing = !!this.counter.domMissing;
        },
        changeBounds(change) {
          let add = change ? 1 : -1;
          this.counter.bounds += add;

          this.consistency.bounds = !!this.counter.bounds;
        },
        changePosition(change) {
          let add = change ? 1 : -1;
          this.counter.position += add;

          this.consistency.position = !!this.counter.position;
        },
      };

      class Text {
        constructor(text) {
          this.text = text;
          this.consistency = {
            domMissing: true,
            bounds: true,
            position: true,
          };
          this.positionCoords = {
            x: 0,
            y: 0,
          };

          this.spn = undefined;
        }
        changemyGlobal() {
          myGlobal.changeDomMissing(true);
          myGlobal.changeBounds(true);
          myGlobal.changePosition(true);
        }

        render() {
          if (this.consistency.domMissing === true) {
            this.spn = document.createElement("span");
            this.spn.style.position = "absolute";
            block.appendChild(this.spn);

            myGlobal.changeDomMissing(false);
            this.consistency.domMissing = false;
          }
          if (this.consistency.bounds === true) {
            this.spn.innerHTML = this.text;

            this.consistency.bounds = false;
            myGlobal.changeBounds(false);
          }
          if (this.consistency.position === true) {
            this.spn.style.left = this.positionCoords.x + "px";
            this.spn.style.top = this.positionCoords.y + "px";

            this.consistency.position = false;
            myGlobal.changePosition(false);
          }
        }
        setPosition(x, y) {
          if (this.positionCoords.x !== x || this.positionCoords.y !== y) {
            this.positionCoords.x = x;
            this.positionCoords.y = y;
            if (!this.consistency.position) {
              this.consistency.position = true;
              myGlobal.changePosition(true);
            }
          }
        }
        setText(newText) {
          if (this.text !== newText) {
            this.text = newText;
            if (!this.consistency.position) {
              this.consistency.bounds = true;
              myGlobal.changeBounds(true);
            }
          }
        }
        getPosition() {
          if (this.spn === undefined) {
            return { x: 0, y: 0 };
          }
          return { x: this.spn.style.left, y: this.spn.style.top };
        }
        getSize() {
          if (this.spn === undefined) {
            return { width: 0, height: 0 };
          }
          const domRect = this.spn.getBoundingClientRect();
          return {
            width: domRect.width,
            height: domRect.height,
          };
        }
      }
      // Instancs

      for (let i = 0; i < 1000; i++) {
        const text = new Text(`Text${i}`);
        text.render();
        text.setPosition();
      }

      // const someText = new Text("Hello, I am span");
      // someText.render();
      // someText.setPosition(50, 50);
      // console.log(myGlobal.consistency);

      // someText.setPosition(70, 70);
      // console.log(myGlobal.consistency);

      // let obj = someText.getSize();
      // console.log(obj);

      // const someText2 = new Text("Hello, I am the second span");

      // someText2.setPosition(70, 70);
      // someText2.render();
      // someText2.render();
      // console.log(myGlobal.counter);
      // someText.render();
      // console.log(myGlobal.counter);

      // console.log(someText2.getPosition());
      // console.log(myGlobal.consistency);

      // const someText3 = new Text("Hello");
    </script>
  </head>
  <body></body>
</html>
